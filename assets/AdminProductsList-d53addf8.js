import{q as ae,x as b,A as M,M as ie,N as ce,J as B,O as de,P as re,Q as ue,G as pe,_ as J,o as d,H as z,d as x,w as k,c as f,j as D,b as s,S as j,f as C,T as F,U as fe,r as Q,p as ve,l as he,g as me,C as _e,F as L,h as H,s as q,e as be,t as V,i as U,n as ge,V as we}from"./index-033dfc34.js";import{U as ye}from"./UseCheckLogin-a36f68a3.js";import{T as O}from"./Toast-0e28cdc5.js";import{L as ke}from"./index-2a428af0.js";/* empty css              */import{F as xe}from"./FormGroup-8d6f8598.js";const K=ae("modal",()=>{const e=b(!1),t=b(null);function n(){e.value=!0}function o(){e.value=!1}return M(()=>e.value,c=>{c?document.querySelector("body").classList.add("overflow-hidden"):setTimeout(()=>{document.querySelector("body").classList.remove("overflow-hidden")},300)}),{modalState:e,currentName:t,modalShow:n,modalClose:o}});function Z(e){return ie()?(ce(e),!0):!1}function $(e){return typeof e=="function"?e():B(e)}const ee=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Le=Object.prototype.toString,Se=e=>Le.call(e)==="[object Object]",A=()=>{},I=Ce();function Ce(){var e,t;return ee&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const R={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function $e(...e){if(e.length!==1)return de(...e);const t=e[0];return typeof t=="function"?re(ue(()=>({get:t,set:A}))):b(t)}function S(e){var t;const n=$(e);return(t=n==null?void 0:n.$el)!=null?t:n}const te=ee?window:void 0;function N(...e){let t,n,o,c;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,c]=e,t=te):[t,n,o,c]=e,!t)return A;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const h=[],a=()=>{h.forEach(g=>g()),h.length=0},r=(g,w,l,p)=>(g.addEventListener(w,l,p),()=>g.removeEventListener(w,l,p)),u=M(()=>[S(t),$(c)],([g,w])=>{if(a(),!g)return;const l=Se(w)?{...w}:w;h.push(...n.flatMap(p=>o.map(m=>r(g,p,m,l))))},{immediate:!0,flush:"post"}),y=()=>{u(),a()};return Z(y),y}let G=!1;function Y(e,t,n={}){const{window:o=te,ignore:c=[],capture:h=!0,detectIframe:a=!1}=n;if(!o)return;I&&!G&&(G=!0,Array.from(o.document.body.children).forEach(l=>l.addEventListener("click",A)),o.document.documentElement.addEventListener("click",A));let r=!0;const u=l=>c.some(p=>{if(typeof p=="string")return Array.from(o.document.querySelectorAll(p)).some(m=>m===l.target||l.composedPath().includes(m));{const m=S(p);return m&&(l.target===m||l.composedPath().includes(m))}}),g=[N(o,"click",l=>{const p=S(e);if(!(!p||p===l.target||l.composedPath().includes(p))){if(l.detail===0&&(r=!u(l)),!r){r=!0;return}t(l)}},{passive:!0,capture:h}),N(o,"pointerdown",l=>{const p=S(e);r=!u(l)&&!!(p&&!l.composedPath().includes(p))},{passive:!0}),a&&N(o,"blur",l=>{setTimeout(()=>{var p;const m=S(e);((p=o.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(m!=null&&m.contains(o.document.activeElement))&&t(l)},0)})].filter(Boolean);return()=>g.forEach(l=>l())}const Me={[R.mounted](e,t){const n=!t.modifiers.bubble;if(typeof t.value=="function")e.__onClickOutside_stop=Y(e,t.value,{capture:n});else{const[o,c]=t.value;e.__onClickOutside_stop=Y(e,o,Object.assign({capture:n},c))}},[R.unmounted](e){e.__onClickOutside_stop()}};function P(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function oe(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:oe(n)}}function Ve(e){const t=e||window.event,n=t.target;return oe(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const E=new WeakMap;function Oe(e,t=!1){const n=b(t);let o=null,c;M($e(e),r=>{const u=P($(r));if(u){const y=u;E.get(y)||E.set(y,c),n.value&&(y.style.overflow="hidden")}},{immediate:!0});const h=()=>{const r=P($(e));!r||n.value||(I&&(o=N(r,"touchmove",u=>{Ve(u)},{passive:!1})),r.style.overflow="hidden",n.value=!0)},a=()=>{var r;const u=P($(e));!u||!n.value||(I&&(o==null||o()),u.style.overflow=(r=E.get(u))!=null?r:"",E.delete(u),n.value=!1)};return Z(a),pe({get(){return n.value},set(r){r?h():a()}})}function Ee(){let e=!1;const t=b(!1);return(n,o)=>{if(t.value=o.value,e)return;e=!0;const c=Oe(n,o.value);M(t,h=>c.value=h)}}Ee();const se=e=>(ve("data-v-aebbfed8"),e=e(),he(),e),Ne={key:0,class:"modal"},Ae={class:"border rounded w-50 bg-white"},Pe={class:"d-flex justify-content-between border-bottom p-3"},ze={class:"border-bottom px-3"},De=se(()=>s("button",{class:"btn btn-primary",type:"submit"},"確定",-1)),Ie=se(()=>s("div",{class:"model-bg"},null,-1)),Be={__name:"ModalView",props:{show:Boolean,submit:Function,modalName:String},emits:["update:show"],setup(e,{emit:t}){const n=e;function o(){t("update:show",!1)}const c=K();M(()=>c.modalState,a=>{a?(c.currentName=n.modalName,console.log(c.currentName)):c.currentName===n.modalName&&(c.currentName=null)});function h(a){console.log(a),Object.keys(a).length===0?n.submit():(console.log(a),n.submit(a))}return(a,r)=>{const u=Q("VForm");return d(),z(fe,{to:"body"},[x(F,{name:"modal",duration:200},{default:k(()=>[n.show?(d(),f("div",Ne,[D((d(),f("div",Ae,[s("div",Pe,[j(a.$slots,"modal-head",{},void 0,!0),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o})]),s("div",ze,[x(u,{onSubmit:h,class:"mt-5"},{default:k(()=>[j(a.$slots,"modal-body",{},void 0,!0),s("div",{class:"p-3 text-end"},[s("button",{class:"btn btn-secondary me-2",type:"button",onClick:o}," 取消 "),De])]),_:3})])])),[[B(Me),o]])])):C("",!0)]),_:3}),n.show?(d(),z(F,{key:0,name:"model-bg",duration:{enter:0,leave:200}},{default:k(()=>[Ie]),_:1})):C("",!0)])}}},X=J(Be,[["__scopeId","data-v-aebbfed8"]]);const Te={},We=me('<p class="placeholder-glow" data-v-1b717d54><span class="placeholder col-12" data-v-1b717d54></span></p><p class="placeholder-glow" data-v-1b717d54><span class="placeholder col-4 me-2" data-v-1b717d54></span><span class="placeholder col-7" data-v-1b717d54></span></p><p class="placeholder-glow" data-v-1b717d54><span class="placeholder col-3 me-2" data-v-1b717d54></span><span class="placeholder col-6 me-2" data-v-1b717d54></span><span class="placeholder col-2" data-v-1b717d54></span></p><p class="placeholder-glow" data-v-1b717d54><span class="placeholder col-3 me-2" data-v-1b717d54></span><span class="placeholder col-2 me-2" data-v-1b717d54></span><span class="placeholder col-2 me-2" data-v-1b717d54></span><span class="placeholder col-3" data-v-1b717d54></span></p><a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true" data-v-1b717d54></a>',5),je=[We];function Fe(e,t){return d(),f("div",null,je)}const He=J(Te,[["render",Fe],["__scopeId","data-v-1b717d54"]]);const qe={class:"modal-outside-style"},Ue={class:"table-responsive-xl"},Re=s("h5",{class:"mt-4"},"產品列表",-1),Ge={class:"text-end me-2"},Ye={class:"table caption-top"},Xe=s("thead",null,[s("tr",null,[s("th",{style:{width:"20%"}},"分類"),s("th",{style:{width:"30%"}},"名稱"),s("th",{style:{width:"25%"}},"售價"),s("th",{style:{width:"15%"}},"狀態"),s("th",{style:{width:"10%"}})])],-1),Je={key:0,class:"table-group-divider"},Qe={class:"badge bg-secondary"},Ke={key:0,class:"badge bg-success"},Ze={key:1,class:"badge bg-danger"},et=["onClick"],tt=s("svg",{class:"svg-opacity",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512"},[s("path",{d:"M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"})],-1),ot=[tt],st=["onClick"],nt=s("svg",{class:"svg-opacity",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14",viewBox:"0 0 448 512"},[s("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})],-1),lt=[nt],at={key:0,"aria-label":"Page navigation example"},it={class:"pagination justify-content-center mt-4"},ct={class:"page-item"},dt={class:"text-info",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512",style:{fill:"#0d6efd"}},rt=s("path",{d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"},null,-1),ut=[rt],pt={class:"page-item"},ft={xmlns:"http://www.w3.org/2000/svg",height:"16",width:"10",viewBox:"0 0 320 512",style:{fill:"#0d6efd"}},vt=s("path",{d:"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1),ht=[vt],mt={key:0,class:"page-item"},_t=["onClick","disabled"],bt={class:"page-item"},gt={xmlns:"http://www.w3.org/2000/svg",height:"16",width:"10",viewBox:"0 0 320 512",style:{fill:"#0d6efd"}},wt=s("path",{d:"M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"},null,-1),yt=[wt],kt={class:"page-item"},xt={xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512",style:{fill:"#0d6efd"}},Lt=s("path",{d:"M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"},null,-1),St=[Lt],Ct=s("h5",{class:"m-0"},"刪除商品",-1),$t=s("p",{class:"m-0"},"是否要刪除商品?!",-1),Mt=s("h5",{class:"m-0"},"編輯商品",-1),zt={__name:"AdminProductsList",setup(e){const t=b(!1);K();const{checkLogin:n}=ye(),o=b(""),c=b(!1),h=b(null);function a(_=1){n(),h.value=_,!(o.value&&(_==0||_>o.value.pagination.total_pages))&&(c.value=!0,q.get(`https://vue3-course-api.hexschool.io/v2/api/deliciousfood/admin/products?page=${_}`).then(v=>{v.data.success?o.value=v.data:O.fire({title:"無法取得產品資料，請重新整理畫面",icon:"error"})}).catch(v=>{O.fire({title:`${v.message}`,icon:"error"})}).finally(()=>{c.value=!1}))}const r=b(null),u=b(!1);function y(_){r.value=_,u.value=!0}function g(){t.value=!0,n(),q.delete(`https://vue3-course-api.hexschool.io/v2/api/deliciousfood/admin/product/${r.value}`).then(_=>{O.fire({title:`${_.data.message}`,icon:"success"}),a(h.value)}).catch(_=>{O.fire({title:`${_.message}`,icon:"error"})}).finally(()=>{t.value=!1,u.value=!1})}const w=b(!1),l=b(null);function p(_){l.value=_,w.value=!0}function m(){console.log(1111)}const ne=[{label:"標題",name:"title",placeholder:"請輸入產品名稱",rules:"required",as:"input",type:"text"},{label:"餐飲類型",name:"category",as:"select",value:"日式",options:[{label:"日式",value:"日式"},{label:"西餐",value:"西餐"},{label:"中式",value:"中式"},{label:"甜食",value:"甜食"}]},{label:"站別",name:"unit",as:"select",value:"大慶站",options:[{label:"大慶站",value:"大慶站"},{label:"豐樂公園站",value:"豐樂公園站"},{label:"文華高中",value:"文華高中"},{label:"水安宮站",value:"水安宮站"},{label:"文心崇德站",value:"文心崇德站"},{label:"松竹站",value:"松竹站"}]},{label:"銷售價",name:"price",rules:"required|integer",as:"input",type:"number"},{label:"原價",name:"origin_price",rules:"required|integer",as:"input",type:"number"},{label:"商品描述",name:"description",as:"input",type:"text"},{label:"商品內容",name:"content",as:"input",type:"text"},{label:"商品圖片",name:"imageUrl",as:"input",type:"text"},{label:"是否啟用",name:"is_enabled",as:"checkbox",type:"checkbox"}];return _e(()=>{a()}),(_,v)=>{const le=Q("RouterLink"),T=we("tooltip");return d(),f(L,null,[x(B(ke),{active:t.value,"onUpdate:active":v[0]||(v[0]=i=>t.value=i),loader:"dots"},null,8,["active"]),s("div",qe,[c.value?(d(),z(He,{key:0})):(d(),f(L,{key:1},[s("div",Ue,[Re,s("div",Ge,[x(le,{to:"/backend/addProduct",class:"btn btn-outline-danger"},{default:k(()=>[be(" 新增產品 ")]),_:1})]),s("table",Ye,[Xe,o.value.products?(d(),f("tbody",Je,[(d(!0),f(L,null,H(o.value.products,i=>(d(),f("tr",{key:i.id},[s("td",null,[s("span",Qe,V(i.unit),1)]),s("td",null,V(i.title),1),s("td",null,V(i.price),1),s("td",null,[i.is_enabled?(d(),f("span",Ke,"已上架")):(d(),f("span",Ze,"未上架"))]),s("td",null,[D((d(),f("button",{class:"p-0 me-2 btn-icon",type:"button",onClick:U(W=>p(i.id),["stop"])},ot,8,et)),[[T,"編輯"]]),D((d(),f("button",{class:"btn-icon p-0",type:"button",onClick:U(W=>y(i.id),["stop"])},lt,8,st)),[[T,"刪除"]])])]))),128))])):C("",!0)])]),o.value.pagination?(d(),f("nav",at,[s("ul",it,[s("li",ct,[s("button",{type:"button",class:"page-link",href:"#",onClick:v[1]||(v[1]=i=>a(1))},[(d(),f("svg",dt,ut))])]),s("li",pt,[s("button",{type:"button",class:"page-link",href:"#",onClick:v[2]||(v[2]=i=>a(o.value.pagination.current_page-1))},[(d(),f("svg",ft,ht))])]),(d(!0),f(L,null,H(o.value.pagination.total_pages,i=>(d(),f(L,{key:i},[i>o.value.pagination.current_page-3&&i<o.value.pagination.current_page+3?(d(),f("li",mt,[s("button",{class:ge(["page-link",{disabled:i==o.value.pagination.current_page}]),onClick:W=>a(i),href:"#",disabled:i==o.value.pagination.current_page},V(i),11,_t)])):C("",!0)],64))),128)),s("li",bt,[s("button",{type:"button",class:"page-link",href:"#",onClick:v[3]||(v[3]=i=>a(o.value.pagination.current_page+1))},[(d(),f("svg",gt,yt))])]),s("li",kt,[s("button",{type:"button",class:"page-link",href:"#",onClick:v[4]||(v[4]=i=>a(o.value.pagination.total_pages))},[(d(),f("svg",xt,St))])])])])):C("",!0)],64))]),x(X,{show:u.value,"onUpdate:show":v[5]||(v[5]=i=>u.value=i),submit:g},{"modal-head":k(()=>[Ct]),"modal-body":k(()=>[$t]),_:1},8,["show"]),x(X,{show:w.value,"onUpdate:show":v[6]||(v[6]=i=>w.value=i),submit:m},{"modal-head":k(()=>[Mt]),"modal-body":k(()=>[x(xe,{"form-schema":ne})]),_:1},8,["show"])],64)}}};export{zt as default};
