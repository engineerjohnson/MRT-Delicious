import{_ as v,x as b,c as m,b as e,d as o,w,s as x,r as l,o as p,n as _,f as V,e as k,p as y,l as I,I as $}from"./index-033dfc34.js";import{T as u}from"./Toast-0e28cdc5.js";const r=a=>(y("data-v-65312428"),a=a(),I(),a),B={class:"container h-100vh text-center pt-5"},C={class:"w-50 m-auto"},F=r(()=>e("h1",null,"登入",-1)),L={class:"form-floating mb-3"},N=r(()=>e("label",{for:"floatingInput"},"請填寫email",-1)),S={class:"form-floating mb-3"},E=r(()=>e("label",{for:"floatingPassword"},"請填寫密碼",-1)),T={type:"submit",class:"btn btn-lg btn-primary w-100 mt-3"},q={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},M={__name:"LoginView",setup(a){const f=$(),i=b(!1);function h(c){i.value=!0,x.post("https://vue3-course-api.hexschool.io/v2/admin/signin",c).then(s=>{const{token:t,expired:n}=s.data;document.cookie=`deliciousfood=${t};expires=${new Date(n)}; path=/`,u.fire({title:`${s.data.message}`,icon:"success"}),f.push("/backend")}).catch(s=>{u.fire({title:`${s.response.data.message}`,icon:"error"})}).finally(()=>{i.value=!1})}return(c,s)=>{const t=l("VField"),n=l("ErrorMessage"),g=l("VForm");return p(),m("div",B,[e("div",C,[F,o(g,{class:"form-signin",onSubmit:h},{default:w(({errors:d})=>[e("div",L,[o(t,{class:_([{"is-invalid":d.username},"form-control"]),rules:"required|email",label:"信箱",name:"username",type:"email",id:"floatingInput",placeholder:"name@example.com"},null,8,["class"]),N,o(n,{name:"username",class:"invalid-feedback mt-3"})]),e("div",S,[o(t,{class:_([{"is-invalid":d.password},"form-control"]),rules:"required",label:"密碼",name:"password",type:"password",id:"floatingPassword",placeholder:"password"},null,8,["class"]),E,o(n,{name:"password",class:"invalid-feedback"})]),e("button",T,[i.value?(p(),m("span",q)):V("",!0),k(" 登入 ")])]),_:1})])])}}},D=v(M,[["__scopeId","data-v-65312428"]]);export{D as default};
